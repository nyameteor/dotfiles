#!/bin/sh

# Exports
# set bat as a colorizing pager for man
# https://github.com/sharkdp/bat#man
export MANPAGER="sh -c 'col -bx | bat -l man -p'"

#
# Keybindings
#
# enable vi mode in ZSH
bindkey -v

#
# Aliases
#
# alternative
# alias vim='nvim'

# useful alias form bashrc
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias ls="ls -G -p"

# Make some of the file manipulation programs verbose
alias mv="mv -v"
alias rm="rm -vi"
alias cp="cp -v"
alias ln="ln -v"
alias mkdir="mkdir -v"

# Prints disk usage in human readable form
# alias d="du -sh"

# Clear the screen of your clutter
# alias c="clear"
# alias cl="clear;ls;pwd"

# GREP Motifications
alias grep="grep --color"
alias grepp="grep -P --color"

# Aliases for macOS
alias stat='stat -x'

#
# Functions
#
# FZF config
# Reverse the search result
export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border --preview '(highlight -O ansi {} || cat {}) 2> /dev/null | head -500'"

# When searching for files, change to fd search and allow searching for hidden files
export FZF_DEFAULT_COMMAND="fd --exclude={.git,.sass-cache,node_modules,build,Library} --type f"
# export FZF_CTRL_T_COMMAND=$FZF_DEFAULT_COMMAND
# export FZF_ALT_C_COMMAND="fd -t d . "

# Trigger factor when searching for files
export FZF_COMPLETION_TRIGGER='ll'

# Auto generated by fzf in 2021-05-22 11:04:28
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# cdf - cd into the directory of the selected file
cdf() {
   local file
   local dir
   file=$(fzf +m -q "$1") && dir=$(dirname "$file") && cd "$dir"
}

# fh - Execute historical commands
fh() {
  eval $( ([ -n "$ZSH_NAME" ] && fc -l 1 || history) | fzf +s --tac | sed 's/ *[0-9]* *//')
}

# echo Path
printpath(){
  echo "$PATH" | tr ':' '\n'
}
